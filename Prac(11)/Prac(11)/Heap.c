#include"Heap.h"//堆的初始化//初始化一个空堆void HeapInit(Heap* hp, int capacity){	assert(hp);	capacity = capacity < 10 ? 10 : capacity;  //这一步的意思其实就是最少都要开始10个内存空间	hp->array = (HPDataType*)malloc(sizeof(HPDataType) * capacity); // 一开始就先申请10个元素的空间	if (NULL == hp->array)	{		assert(0);		return;	}	hp->capacity = capacity;	hp->size = 0;}void Swap(int* left, int* right){	int temp = *left;	*left = *right;	*right = temp;}void AdjustDown(HPDataType* array, int size, int parent){	//用child来标记parent中较小的那一个孩子	//为什么要先标记左孩子，因为parent如果没有左孩子的话，那么更不可能有右孩子	int child = parent * 2 + 1;	while (child < size)	{		//如果说child<size的话，那么就说明这个结点是存在的		//然后需要去找到两个孩子中较小的哪一个		if (child + 1 < size && array[child + 1] < array[child])//但是也不能直接去比较，万一没有有孩子怎么办			//所以需要先保证右孩子是存在的，然后再去进行左右孩子的比较		{			child += 1;			//这样的话，那么就说明较小的孩子已经找到了			//然后去检测双亲是否满足堆的性质			if (array[child] < array[parent])			{				Swap(&array[child], &array[parent]);				parent = child;				child = parent * 2 + 1;			}			else				return;		}	}}//堆的创建//就是用数组中的元素来创建堆void HeapCreate(Heap* hp, int* array, int size){	int root = 0;	//第一步，先将所有数组的元素放在堆结构里面	HeapInit(hp, size);   //先进行空间的开辟，开辟好了之后把数组的元素就放进去就可以了	memcpy(hp->array, array, sizeof(HPDataType) * size);  //进行元素的拷贝	hp->size = size;    //拷贝完成了之后把元素的个数更改一下	//第二步，进行堆的调整	//需要从最后一个有叶子结点的双亲结点开始进行调整	for (int i = (root - 2) / 2; i >= 0; --i)	{		AdjustDown(hp->array, hp->size, root);  //对堆中的root结点进行调整		//反正每循环一次root结点的位置都会发生变化	}}//插入元素void HeapPush(Heap* hp, HPDataType data);//删除元素void HeapPop(Heap* hp);//获取堆顶元素int HeapTop(Heap* hp){	//堆顶元素其实就是数组0号位置的元素	//堆顶元素的标号位0	assert(hp);	return hp->array[0];}//堆是不是为空int HeapEmpty(Heap* hp){	assert(hp);	if (hp->size == 0)		return 1;	return 0;	//或者使用	//return 0 == hp->size;}//堆中元素的个数int HeapSize(Heap* hp){	assert(hp);	if (0 == hp->size)		return 0;	return hp->size;}//堆的销毁void HeapDestroy(Heap* hp){	assert(hp);	free(hp->array);	hp->array = NULL;	hp->capacity = 0;	hp->size = 0;}void TestHeap(){	//给出数组中的元素 	int arr[] = { 3,6,9,1,5,2,0,7,8,4 };	Heap hp;	HeapCreate(&hp, arr, sizeof(arr) / sizeof(arr[0]));	printf("heap size = %d\n", HeapSize(&hp));	printf("heap top = %d\n", HeapTop(&hp));	HeapDestroy(&hp);}